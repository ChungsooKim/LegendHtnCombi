---
classoptions: doublespace
fontsize: 12pt
geometry: margin=1in
header-includes:
- \usepackage[numbers,sort&compress]{natbib}
- \usepackage{booktabs}
- \usepackage{longtable}
- \usepackage{array}
- \usepackage{multirow}
- \usepackage{wrapfig}
- \usepackage{float}
- \usepackage{colortbl}
- \usepackage{pdflscape}
- \usepackage{tabu}
- \usepackage{threeparttable}
- \usepackage{threeparttablex}
- \usepackage[normalem]{ulem}
- \usepackage{makecell}
- \usepackage{caption}
- \usepackage{rotating}
- \usepackage{multirow}
- \usepackage{mwe,tikz}
- \usepackage[percent]{overpic}
- \usepackage{enumitem}
- \usepackage{hyperref}
- \newcolumntype{P}[1]{>{\raggedright\arraybackslash}p{#1}}
- \newcommand{\footerDate}{`r params$date`}
- \input{header.tex}
longtable: yes
mainfont: Arial
output:
  pdf_document:
    keep_tex: yes
    latex_engine: xelatex
    md_extensions: +raw_attribute
    number_sections: yes
  html_document:
    df_print: paged
    toc: true
    toc_depth: 2
    toc_float: true
    number_sections: yes
params:
  date: '2020-09-24'
  version: 0.0.99
subtitle: 'Version: `r params$version`'
title: |
  | RESEARCH PROTOCOL
  | 
  | Large-scale evidence generation and evaluation across a network of databases for type 2 diabetes mellitus
---

\thispagestyle{fancy}

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
options(kableExtra.latex.load_packages = FALSE)
library(kableExtra)
#knitr::knit_hooks$set(document = function(x) {sub('\\usepackage[]{color}', '\\usepackage[table]{xcolor}', x, fixed = TRUE)})
```

\tableofcontents

# List of Abbreviations

```{r abbreviations, echo=FALSE}
abbreviations <- readr::read_delim(col_names = FALSE, delim = ";", trim_ws = TRUE, file = "
  LEGEND; Large-scale evidence generation and evaluation across a network of databases
  DDP4; Yep
")
kable(abbreviations, col.names = NULL, booktabs = TRUE) %>% 
  kable_styling(bootstrap_options = "striped", latex_options = "striped")
```

# Responsible Parties

```{r parties, echo=FALSE}
parties <- readr::read_delim(col_names = TRUE, delim = ";", trim_ws = TRUE, file = "
  Responsible party; Institution/Affiliation
  George Hripcsak; Department of Biomedical Informatics, Columbia University, New York, NY, USA
  Harlan M. Krumholz; Department of Medicine, Yale University, New Haven, CT, USA
  Martijn J. Schuemie; Janssen Research and Development, Titusville, NJ, USA
  Marc A. Suchard *; Department of Biostatistics, University of California, Los Angeles, Los Angeles, CA, USA
")
kable(parties, booktabs = TRUE) %>% 
  kable_styling(bootstrap_options = "striped", latex_options = "striped") %>%
  footnote(general = "* Principal Investigator", general_title = "")
```

# Abstract

When in the Course of human events, it becomes necessary ...

# Amendments and Updates

```{r amendments, echo=FALSE}
amendments <- readr::read_delim(col_names = TRUE, delim = ";", trim_ws = TRUE, file = "
  Number; Date; Section of study protocol; Amendment or update; Reason
  None;;;; 
")
options(knitr.kable.NA = "")
kable(amendments, booktabs = TRUE) %>% 
  kable_styling(bootstrap_options = "striped", latex_options = "striped")
```

# Rationale and Background

# Study Objectives

# Research Methods

# Sample Size and Study Power

# Strengths and Limitations

# Protection of Human Subjects

# Management and Reporting of Adverse Events and Adverse Reactions

# Plans for Disseminating and Communicating Study Results

# Lists of Tables and Figures

# References

# Appendix 1: Literature Review

# Appendix 2: Target, Comparator and Outcome Cohort Definitions

## Acute myocardial infarction

```{r test, echo=FALSE, results="asis", cache=TRUE}
cohort <- ROhdsiWebApi::getCohortDefinition(cohortId = 1247, baseUrl = "http://atlas-covid19.ohdsi.org/WebAPI/")
expression <- RJSONIO::toJSON(cohort$expression)
markdown <- CirceR::cohortPrintFriendly(expression)
writeLines(markdown)
```
